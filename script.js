const questions = [
Â  {
Â  Â  question: "1. En droit civil quÃ©bÃ©cois, quel est le principe fondamental dans la formation des contrats qui permet Ã  une entente d'Ãªtre valide par le seul Ã©change de consentements, sans Ã©crit spÃ©cifique ?",
Â  Â  options: ["A. La restitution des prestations.", "B. Lâ€™opposabilitÃ© des droits.", "C. Le consensualisme.", "D. Le formalisme contractuel."],
Â  Â  answer: 2,
    rationales: [
        "La restitution des prestations est une consÃ©quence de l'annulation ou de la rÃ©solution d'un contrat, pas un principe de formation.",
        "Lâ€™opposabilitÃ© des droits est un effet de la publicitÃ© des droits, et non un principe de base de la formation.",
        "RÃ©ponse correcte. Le principe du **consensualisme** (art. 1385 C.c.Q.) stipule que l'Ã©change des consentements suffit Ã  la formation du contrat.",
        "Le formalisme est l'exception, et non le principe gÃ©nÃ©ral."
    ]
Â  },
Â  {
Â  Â  question: "2. Dans un contrat de consommation ou d'adhÃ©sion au QuÃ©bec, si une clause externe n'a pas Ã©tÃ© expressÃ©ment portÃ©e Ã  la connaissance de la partie adhÃ©rente, quelle est la sanction juridique de cette clause selon l'article 1435 C.c.Q. ?",
Â  Â  options: ["A. Lâ€™adhÃ©rent a droit Ã  des dommages-intÃ©rÃªts punitifs contre lâ€™auteur du contrat.", "B. La clause est frappÃ©e de nullitÃ© relative, et lâ€™ensemble du contrat est annulÃ©.", "C. La clause est susceptible dâ€™une renÃ©gociation obligatoire.", "D. La clause est nulle et rÃ©putÃ©e non Ã©crite."],
Â  Â  answer: 3,
    rationales: [
        "Les dommages-intÃ©rÃªts punitifs ne sont pas la sanction prÃ©vue par l'art. 1435 C.c.Q.",
        "Seule la clause est sanctionnÃ©e, pas l'ensemble du contrat (art. 1435 C.c.Q.).",
        "Il n'y a pas d'obligation lÃ©gale de renÃ©gocier cette clause.",
        "RÃ©ponse correcte. La clause est **nulle et rÃ©putÃ©e non Ã©crite** (art. 1435 C.c.Q.)."
    ]
Â  },
Â  {
Â  Â  question: "3. Quelle est la principale distinction entre la nullitÃ© relative et la nullitÃ© absolue en termes d'intÃ©rÃªt protÃ©gÃ© ?",
Â  Â  options: ["A. La nullitÃ© relative protÃ¨ge un intÃ©rÃªt privÃ© (une partie); la nullitÃ© absolue protÃ¨ge l'intÃ©rÃªt gÃ©nÃ©ral (ordre public).", "B. La nullitÃ© relative peut Ãªtre invoquÃ©e par tout intÃ©ressÃ©; la nullitÃ© absolue seulement par la victime.", "C. La nullitÃ© relative sanctionne l'objet ou la cause illÃ©gale; la nullitÃ© absolue sanctionne les vices de consentement.", "D. La nullitÃ© relative s'applique aux contrats synallagmatiques; la nullitÃ© absolue aux contrats unilatÃ©raux."],
Â  Â  answer: 0,
    rationales: [
        "RÃ©ponse correcte. La **nullitÃ© relative** protÃ¨ge l'intÃ©rÃªt particulier (vices de consentement) tandis que la **nullitÃ© absolue** protÃ¨ge l'intÃ©rÃªt gÃ©nÃ©ral (ordre public, absence de consentement).",
        "C'est l'inverse : la nullitÃ© absolue peut Ãªtre invoquÃ©e par tout intÃ©ressÃ©.",
        "C'est l'inverse. L'objet ou la cause illÃ©gale (intÃ©rÃªt public) mÃ¨ne Ã  la nullitÃ© absolue.",
        "La distinction ne repose pas sur la nature du contrat (synallagmatique/unilatÃ©ral)."
    ]
Â  },
Â  {
Â  Â  question: "4. Quelles sont les conditions essentielles Ã  la formation valide d'un contrat selon l'article 1385 C.c.Q. ?",
Â  Â  options: ["A. La capacitÃ© de contracter, le droit de propriÃ©tÃ©, un prix, et la publicitÃ© du contrat.", "B. Le consentement (libre et Ã©clairÃ©), la capacitÃ© de contracter, un objet et une cause.", "C. La preuve Ã©crite, lâ€™absence de dol, la capacitÃ© des parties, et lâ€™objet de lâ€™obligation.", "D. Le consentement, la capacitÃ©, la forme solennelle et la clause pÃ©nale."],
Â  Â  answer: 1,
    rationales: [
        "Le droit de propriÃ©tÃ© et la publicitÃ© ne sont pas des conditions *essentielles* Ã  la formation de tous les contrats.",
        "RÃ©ponse correcte. L'article 1385 C.c.Q. Ã©nonce ces quatre conditions : **Consentement, CapacitÃ©, Objet et Cause**.",
        "La preuve Ã©crite n'est pas essentielle Ã  la formation (principe du consensualisme).",
        "La forme solennelle est l'exception, non la rÃ¨gle."
    ]
Â  },
Â  {
Â  Â  question: "5. Un contrat est dit Â« nommÃ© Â» en droit civil quÃ©bÃ©cois lorsque :",
Â  Â  options: ["A. Il est obligatoirement rÃ©digÃ© sous la forme dâ€™un acte notariÃ© en minute.", "B. Il est crÃ©Ã© et nÃ©gociÃ© spÃ©cifiquement entre deux parties qui lui donnent un nom.", "C. Il est expressÃ©ment dÃ©signÃ© et rÃ©glementÃ© par des dispositions spÃ©cifiques dans le Code civil du QuÃ©bec (C.c.Q.).", "D. Il dÃ©roge systÃ©matiquement Ã  toutes les rÃ¨gles gÃ©nÃ©rales du droit des obligations."],
Â  Â  answer: 2,
    rationales: [
        "Ceci dÃ©crit une exigence formelle, pas la classification de 'nommÃ©'.",
        "Un contrat crÃ©Ã© spÃ©cifiquement par les parties est un contrat *innomÃ©*.",
        "RÃ©ponse correcte. Les contrats **nommÃ©s** (vente, louage, mandat) ont des rÃ¨gles spÃ©cifiques prÃ©vues au C.c.Q.",
        "Les contrats nommÃ©s sont d'abord soumis aux rÃ¨gles gÃ©nÃ©rales, non l'inverse."
    ]
Â  },
Â  {
Â  Â  question: "6. Quelle est la sanction commune Ã  tous les vices de consentement (erreur, dol, crainte, lÃ©sion) en droit quÃ©bÃ©cois ?",
Â  Â  options: ["A. Lâ€™octroi obligatoire de dommages-intÃ©rÃªts punitifs.", "B. La nullitÃ© relative du contrat.", "C. La rÃ©siliation du contrat pour lâ€™avenir.", "D. La nullitÃ© absolue."],
Â  Â  answer: 1,
    rationales: [
        "L'octroi de dommages-intÃ©rÃªts punitifs n'est jamais obligatoire et n'est pas la sanction principale.",
        "RÃ©ponse correcte. Les vices de consentement (art. 1407 C.c.Q.) ont pour sanction la **nullitÃ© relative**.",
        "La rÃ©siliation est une sanction pour inexÃ©cution contractuelle.",
        "La nullitÃ© absolue sanctionne la violation de l'ordre public, pas les vices du consentement."
    ]
Â  },
Â  {
Â  Â  question: "7. Quelle condition sâ€™ajoute Ã  lâ€™erreur pour quâ€™elle puisse entraÃ®ner la nullitÃ© du contrat (art. 1400 al. 2 C.c.Q.)?",
Â  Â  options: ["A. Elle doit porter sur la simple valeur Ã©conomique du bien.", "B. Elle doit Ãªtre connue du cocontractant.", "C. Elle doit Ãªtre excusable.", "D. Elle doit Ãªtre provoquÃ©e par un mensonge du cocontractant."],
Â  Â  answer: 2,
    rationales: [
        "L'erreur portant sur la simple valeur Ã©conomique n'est jamais une cause de nullitÃ©.",
        "Ce critÃ¨re est souvent un critÃ¨re de preuve, mais l'art. 1400 al. 2 impose l'excusabilitÃ©.",
        "RÃ©ponse correcte. L'erreur doit Ãªtre **excusable**; une erreur inexcusable n'est pas une cause de nullitÃ© (art. 1400 al. 2 C.c.Q.).",
        "Si l'erreur est provoquÃ©e par un mensonge, on est dans le rÃ©gime du *dol*."
    ]
Â  },
Â  {
Â  Â  question: "8. Le dol (fraude) est un vice de consentement qui se caractÃ©rise par :",
Â  Â  options: ["A. Lâ€™emploi de manÅ“uvres, de mensonges ou dâ€™une rÃ©ticence dans lâ€™intention de tromper le cocontractant (art. 1401 C.c.Q.).", "B. La contrainte physique ou morale exercÃ©e par un tiers.", "C. Une disproportion monÃ©taire significative entre les prestations.", "D. Le fait quâ€™une clause externe nâ€™ait pas Ã©tÃ© portÃ©e Ã  la connaissance de lâ€™adhÃ©rent."],
Â  Â  answer: 0,
    rationales: [
        "RÃ©ponse correcte. Le dol implique une **intention de tromper** par manÅ“uvres, mensonges ou rÃ©ticence (art. 1401 C.c.Q.).",
        "Ceci est la dÃ©finition de la *crainte* (violence).",
        "Ceci est la dÃ©finition de la *lÃ©sion*.",
        "Ceci est une sanction liÃ©e Ã  la forme de l'accord (art. 1435 C.c.Q.), non un vice de consentement."
    ]
Â  },
Â  {
Â  Â  question: "9. Quel vice de consentement peut entraÃ®ner la nullitÃ© du contrat mÃªme s'il est provoquÃ© par un tiers (une personne non-contractante) ?",
Â  Â  options: ["A. La lÃ©sion.", "B. Lâ€™erreur simple.", "C. Le dol.", "D. La crainte."],
Â  Â  answer: 2,
    rationales: [
        "La lÃ©sion est un prÃ©judice Ã©conomique, non une action de tromperie par un tiers.",
        "L'erreur simple est spontanÃ©e et ne rÃ©sulte pas de l'action d'un tiers.",
        "RÃ©ponse correcte. Le **dol** peut Ãªtre exercÃ© par un tiers si la partie contractante qui en bÃ©nÃ©ficie le savait (art. 1401 al. 2 C.c.Q.).",
        "Bien que la crainte puisse Ãªtre exercÃ©e par un tiers, le dol est le vice le plus explicitement visÃ© par la loi pour l'action du tiers avec connaissance du cocontractant."
    ]
Â  },
Â  {
Â  Â  question: "10. La lÃ©sion (dÃ©sÃ©quilibre Ã©conomique) est-elle un vice de consentement gÃ©nÃ©ralement disponible Ã  toutes les parties au contrat ?",
Â  Â  options: ["A. Non, elle est seulement disponible aux mineurs et aux majeurs protÃ©gÃ©s (art. 1405 C.c.Q.).", "B. Non, elle nâ€™est disponible quâ€™aux consommateurs dans tous les contrats de consommation.", "C. Oui, tout le monde peut lâ€™invoquer si la disproportion est prouvÃ©e.", "D. Oui, mais seulement dans les contrats Ã  titre gratuit."],
Â  Â  answer: 0,
    rationales: [
        "RÃ©ponse correcte. La **lÃ©sion** n'est disponible qu'aux **mineurs et majeurs protÃ©gÃ©s** ou lorsque la loi le prÃ©voit expressÃ©ment.",
        "Elle n'est pas disponible dans *tous* les contrats de consommation.",
        "Non, le principe est l'inverse : la lÃ©sion n'est pas un motif de nullitÃ© pour les majeurs autonomes.",
        "La disponibilitÃ© de la lÃ©sion ne dÃ©pend pas de la gratuitÃ© du contrat."
    ]
Â  },
Â  {
Â  Â  question: "11. Pourquoi le dol (art. 1401 C.c.Q.) est-il qualifiÃ© de Â« catÃ©gorie spÃ©ciale dâ€™erreur Â» ?",
Â  Â  options: ["A. Parce quâ€™il est une erreur spontanÃ©e portant sur une qualitÃ© substantielle.", "B. Parce que câ€™est une erreur intentionnellement provoquÃ©e par le cocontractant (ou un tiers) par malice.", "C. Parce que le dol est le seul vice qui permet une action en nullitÃ© absolue.", "D. Parce que le dol est le seul vice qui nÃ©cessite un Ã©crit pour Ãªtre prouvÃ©."],
Â  Â  answer: 1,
    rationales: [
        "Ceci est la dÃ©finition de l'erreur simple (art. 1400 C.c.Q.).",
        "RÃ©ponse correcte. Le dol est une erreur de la victime, mais celle-ci est **intentionnellement provoquÃ©e** par la mauvaise foi du cocontractant (ou du tiers), d'oÃ¹ sa qualification de 'spÃ©ciale'.",
        "Le dol entraÃ®ne la nullitÃ© relative, pas absolue.",
        "Le dol, comme tout fait juridique, peut se prouver par tous les moyens."
    ]
Â  },
Â  {
Â  Â  question: "12. Quelle est la consÃ©quence de la mauvaise foi inhÃ©rente au dol quant Ã  l'exigence d'excusabilitÃ© de l'erreur chez la victime ?",
Â  Â  options: ["A. L'excusabilitÃ© est prÃ©sumÃ©e; le fraudeur doit prouver l'inexcusabilitÃ© de la victime.", "B. L'erreur de la victime doit Ãªtre excusable, comme dans le cas de l'erreur simple.", "C. La condition d'excusabilitÃ© est Ã©cartÃ©e; la nullitÃ© est possible mÃªme si l'erreur de la victime Ã©tait inexcusable (nÃ©gligente).", "D. Le dol entraÃ®ne la nullitÃ© uniquement s'il est cumulÃ© avec une crainte."],
Â  Â  answer: 2,
    rationales: [
        "Ce n'est pas la rÃ¨gle; la condition d'excusabilitÃ© est simplement Ã©cartÃ©e.",
        "Faux. Si l'erreur est dolosive, l'exigence d'excusabilitÃ© est Ã©cartÃ©e.",
        "RÃ©ponse correcte. La condition d'excusabilitÃ© est **Ã©cartÃ©e** en cas de dol, car il serait inacceptable de permettre au fraudeur d'invoquer la nÃ©gligence de sa victime.",
        "Le dol est un motif de nullitÃ© autonome."
    ]
Â  },
Â  {
Â  Â  question: "13. La crainte (violence) vicie le consentement en affectant le caractÃ¨re :",
Â  Â  options: ["A. Ã‰clairÃ© du consentement.", "B. Personnel du consentement.", "C. Libre du consentement.", "D. Ã‰crit du consentement."],
Â  Â  answer: 2,
    rationales: [
        "L'erreur affecte le caractÃ¨re Ã©clairÃ© du consentement.",
        "Le caractÃ¨re personnel n'est pas un critÃ¨re de validitÃ© du consentement.",
        "RÃ©ponse correcte. La **crainte** (violence) vicie le consentement en le rendant non-**libre** (art. 1402 C.c.Q.).",
        "La forme (Ã©crit) n'est pas un critÃ¨re gÃ©nÃ©ral de validitÃ© du consentement."
    ]
Â  },
Â  {
Â  Â  question: "14. En droit quÃ©bÃ©cois, une menace d'exercer un droit lÃ©gitime (ex. : menacer de poursuivre en justice pour une dette rÃ©elle) peut-elle constituer une crainte menant Ã  la nullitÃ© (Art. 1403 C.c.Q.)?",
Â  Â  options: ["A. Oui, si la victime est un consommateur.", "B. Oui, si l'exercice de ce droit est dÃ©tournÃ© de son but ou utilisÃ© pour obtenir un avantage excessif et indu.", "C. Oui, car toute menace est considÃ©rÃ©e comme une violence morale en droit civil.", "D. Non, l'exercice d'un droit lÃ©gitime ne peut jamais constituer une crainte, mÃªme s'il met la pression sur l'autre partie."],
Â  Â  answer: 1,
    rationales: [
        "Ce n'est pas limitÃ© aux consommateurs.",
        "RÃ©ponse correcte. L'article 1403 C.c.Q. prÃ©voit que mÃªme la menace d'exercer un droit lÃ©gitime constitue une crainte si elle est utilisÃ©e pour obtenir un **avantage excessif et indu**.",
        "Ceci est faux; l'exercice lÃ©gitime d'un droit est autorisÃ© tant qu'il n'est pas dÃ©tournÃ© de son but.",
        "Faux. L'art. 1403 C.c.Q. prÃ©voit l'exception de l'avantage excessif et indu."
    ]
Â  },
Â  {
Â  Â  question: "15. Quel aspect du consentement est viciÃ© par lâ€™erreur ?",
Â  Â  options: ["A. Le consentement n'est pas libre.", "B. Le consentement n'est pas Ã©clairÃ©.", "C. Le consentement est absent.", "D. Le consentement est forcÃ© physiquement."],
Â  Â  answer: 1,
    rationales: [
        "La crainte (violence) affecte le caractÃ¨re libre du consentement.",
        "RÃ©ponse correcte. Lâ€™**erreur** est une fausse reprÃ©sentation de la rÃ©alitÃ©, ce qui signifie que le consentement n'est pas **Ã©clairÃ©**.",
        "L'absence de consentement est une cause de nullitÃ© absolue, non un vice.",
        "Le consentement forcÃ© physiquement est une forme de crainte (violence)."
    ]
Â  },
Â  {
Â  Â  question: "16. La cause dâ€™un contrat devient illÃ©gale lorsque :",
Â  Â  options: ["A. Elle est prohibÃ©e par la loi ou contraire Ã  lâ€™ordre public.", "B. Elle nâ€™est pas Ã©crite dans le contrat.", "C. Elle est mal comprise par une partie.", "D. Elle nâ€™a pas dâ€™objet."],
Â  Â  answer: 0,
    rationales: [
        "RÃ©ponse correcte. La **cause** (le motif dÃ©terminant) est illÃ©gale si elle est **prohibÃ©e par la loi ou contraire Ã  lâ€™ordre public** (art. 1411 C.c.Q.).",
        "La cause n'a pas d'exigence formelle d'Ãªtre Ã©crite.",
        "La mauvaise comprÃ©hension de la cause n'est pas un critÃ¨re d'illÃ©galitÃ©.",
        "La cause et l'objet sont deux Ã©lÃ©ments distincts de la formation du contrat."
    ]
Â  },
Â  {
Â  Â  question: "17. Quelle situation prÃ©sente une cause illÃ©gale ?",
Â  Â  options: ["A. PrÃªt pour acheter une voiture dâ€™occasion.", "B. PrÃªt pour acheter de la drogue.", "C. Vente dâ€™un terrain.", "D. Bail commercial."],
Â  Â  answer: 1,
    rationales: [
        "Acheter une voiture d'occasion est un motif lÃ©gal.",
        "RÃ©ponse correcte. Le motif (la **cause**) du contrat est illÃ©gal lorsque l'intention rÃ©elle d'une partie est de financer une activitÃ© criminelle (achat de drogue).",
        "Vendre un terrain est un motif lÃ©gal.",
        "Un bail commercial est un motif lÃ©gal."
    ]
Â  },
Â  {
Â  Â  question: "18. Quelle situation prÃ©sente un objet illÃ©gal ?",
Â  Â  options: ["A. Vente dâ€™un bien immobilier.", "B. Contrat de travail avec salaire minimum.", "C. Vente dâ€™un organe humain.", "D. Contrat de location rÃ©sidentielle."],
Â  Â  answer: 2,
    rationales: [
        "Vendre un bien immobilier est un objet lÃ©gal.",
        "Le contrat de travail est un objet lÃ©gal (respectant la loi).",
        "RÃ©ponse correcte. La **vente dâ€™un organe humain** est un **objet illÃ©gal** car le corps humain et ses parties sont hors commerce (contraire Ã  l'ordre public).",
        "La location rÃ©sidentielle est un objet lÃ©gal."
    ]
Â  },
Â  {
Â  Â  question: "19. Lâ€™erreur simple est un vice de consentement qui se caractÃ©rise par :",
Â  Â  options: ["A. La contrainte physique ou morale exercÃ©e par un tiers.", "B. Le mensonge ou la rÃ©tention dâ€™information.", "C. Une fausse reprÃ©sentation de la rÃ©alitÃ©.", "D. La capacitÃ© du cocontractant."],
Â  Â  answer: 2,
    rationales: [
        "Ceci est la dÃ©finition de la crainte (violence).",
        "Ceci est la dÃ©finition du dol (fraude).",
        "RÃ©ponse correcte. Lâ€™**erreur simple** (art. 1400 C.c.Q.) est une **fausse reprÃ©sentation spontanÃ©e** de la rÃ©alitÃ©.",
        "La capacitÃ© est une condition de formation, non un vice du consentement."
    ]
Â  },
Â  {
Â  Â  question: "20. Selon lâ€™article 1401 C.c.Q., le dol peut-il provenir dâ€™une personne autre que lâ€™autre partie contractante ?",
Â  Â  options: ["A. Non, le dol doit toujours venir de lâ€™autre partie.", "B. Oui, si la tromperie cause une erreur dÃ©terminante.", "C. Oui, si la tromperie est connue du cocontractant qui en profite (art. 1401 al. 2 C.c.Q.).", "D. Non, sauf si la lÃ©sion est prouvÃ©e."],
Â  Â  answer: 2,
    rationales: [
        "Faux. L'art. 1401 al. 2 C.c.Q. prÃ©voit explicitement le cas du tiers.",
        "Cette option est incomplÃ¨te. La loi exige la connaissance du dol par le cocontractant qui en bÃ©nÃ©ficie.",
        "RÃ©ponse correcte. Le dol peut provenir d'un tiers Ã  condition qu'il soit **connu de la partie qui en tire avantage** (art. 1401 al. 2 C.c.Q.).",
        "Le dol et la lÃ©sion sont des vices distincts."
    ]
Â  }
];

// Tableau pour stocker l'index de la rÃ©ponse choisie par l'utilisateur pour chaque question.
let userAnswers = new Array(questions.length).fill(null);
let current = 0; // Index de la question actuelle

// RÃ©cupÃ©ration des Ã©lÃ©ments du DOM
const quizDiv = document.getElementById("quiz");
const scoreText = document.getElementById("score");
const navContainer = document.getElementById("navigation-buttons");

// Affiche la question actuelle et met Ã  jour l'Ã©tat de la navigation
function showQuestion() {
Â  const q = questions[current];
Â Â 
Â  // 1. GÃ©nÃ©rer le HTML de la question et des options (tuiles)
Â  quizDiv.innerHTML = `<h2>${q.question}</h2>` +Â 
Â  Â  q.options.map((opt, i) =>Â 
Â  Â  Â  // Ajout de la classe 'selected' si cette option a dÃ©jÃ  Ã©tÃ© choisie
Â  Â  Â  `<button class="option-btn ${userAnswers[current] === i ? 'selected' : ''}" data-index="${i}">${opt}</button>`
Â  Â  ).join("") +Â 
    // Ajout d'une zone pour le feedback/rationale
    `<div id="feedback-area"></div>`;

Â  // 2. Si une rÃ©ponse a dÃ©jÃ  Ã©tÃ© donnÃ©e, afficher immÃ©diatement le feedback (pour la rÃ©vision)
Â  if (userAnswers[current] !== null) {
Â  Â  // RÃ©-appliquer les classes de couleur et afficher le feedback
Â  Â  document.querySelectorAll('.option-btn').forEach(btn => {
        btn.disabled = true;
        const index = parseInt(btn.getAttribute('data-index'));
        if (index === q.answer) {
            btn.classList.add('correct-answer');
        } else if (index === userAnswers[current]) {
            btn.classList.add('selected-incorrect');
        }
    });
    displayFeedback(userAnswers[current]);
Â  }
Â Â 
Â  // 3. Mettre Ã  jour les boutons de navigation et le texte de progression
Â  updateNavigation();
Â  updateScoreText();

Â  // 4. Ajouter les Ã©couteurs d'Ã©vÃ©nements aux nouvelles options
Â  document.querySelectorAll('.option-btn').forEach(button => {
Â  Â  button.addEventListener('click', function() {
Â  Â  Â  const selectedIndex = parseInt(this.getAttribute('data-index'));
Â  Â  Â  selectAnswer(selectedIndex);
Â  Â  Â  displayFeedback(selectedIndex); // Afficher le feedback immÃ©diatement
Â  Â  });
Â  });
}

// Fonction pour afficher le feedback
function displayFeedback(selectedIndex) {
    const q = questions[current];
    const isCorrect = selectedIndex === q.answer;
    const rationaleText = q.rationales[selectedIndex];
    const feedbackArea = document.getElementById('feedback-area');

    // DÃ©terminer la classe et le titre
    const statusClass = isCorrect ? 'correct' : 'incorrect';
    const statusTitle = isCorrect ? 'âœ… Bonne rÃ©ponse' : 'âŒ Mauvaise rÃ©ponse';
    
    // Afficher le contenu du feedback
    feedbackArea.innerHTML = `
        <div class="feedback-box ${statusClass}">
            <h3>${statusTitle}</h3>
            <p>${rationaleText}</p>
        </div>
    `;

    // Mettre Ã  jour la classe du bouton pour le feedback visuel final
    document.querySelectorAll('.option-btn').forEach(btn => {
        btn.disabled = true; // DÃ©sactiver les autres clics une fois la rÃ©ponse donnÃ©e
        const index = parseInt(btn.getAttribute('data-index'));
        if (index === q.answer) {
            btn.classList.add('correct-answer');
        } else if (index === selectedIndex) {
            btn.classList.add('selected-incorrect');
        }
    });

    updateNavigation();
}


// Enregistre et met en Ã©vidence la rÃ©ponse sÃ©lectionnÃ©e
function selectAnswer(selectedIndex) {
Â  userAnswers[current] = selectedIndex;
Â Â 
Â  // RÃ©initialiser l'Ã©tat visuel avant de sÃ©lectionner la nouvelle rÃ©ponse
Â  document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected', 'correct-answer', 'selected-incorrect'));
Â  document.querySelector(`.option-btn[data-index="${selectedIndex}"]`).classList.add('selected');
}

// Met Ã  jour l'affichage des boutons (PrÃ©cÃ©dent/Suivant)
function updateNavigation() {
Â  // RÃ©cupÃ©rer les boutons (nÃ©cessaire car ils sont rÃ©injectÃ©s dans startReview())
Â  const prevBtn = document.getElementById("prev");
Â  const nextBtn = document.getElementById("next");

Â  if (prevBtn) {
Â  Â  Â  prevBtn.style.display = current === 0 ? "none" : "inline-block";
Â  }
Â Â 
Â  if (current === questions.length) {
Â  Â  navContainer.style.display = "none";
Â  } else {
Â  Â  navContainer.style.display = "block";
Â  Â  if (nextBtn) {
Â  Â  Â  Â  nextBtn.textContent = current === questions.length - 1 ? "Terminer le Quiz" : "Suivant";
Â  Â  }
    // Si la question actuelle n'est pas encore rÃ©pondue, dÃ©sactiver le bouton Suivant
    if (nextBtn && userAnswers[current] === null && current < questions.length - 1) {
        nextBtn.disabled = true;
    } else if (nextBtn) {
        nextBtn.disabled = false;
    }
Â  }
}

// Affiche la progression (Question X/Y)
function updateScoreText() {
Â  Â  if (current < questions.length) {
Â  Â  Â  Â  scoreText.textContent = `Question ${current + 1}/${questions.length}`;
Â  Â  Â  Â  scoreText.style.display = "block";
Â  Â  } else {
Â  Â  Â  Â  scoreText.style.display = "block";
Â  Â  }
}

// Calcule le score final
function calculateScore() {
Â  let finalScore = 0;
Â  for (let i = 0; i < questions.length; i++) {
Â  Â  if (userAnswers[i] === questions[i].answer) {
Â  Â  Â  finalScore++;
Â  Â  }
Â  }
Â  return finalScore;
}

// --- GESTION DE LA NAVIGATION ---

function handlePrevClick() {
Â  if (current > 0) {
Â  Â  current--;
Â  Â  showQuestion();
Â  }
}

function handleNextClick() {
Â  if (current < questions.length - 1) {
Â  Â  current++;
Â  Â  showQuestion();
Â  } else if (current === questions.length - 1) {
Â  Â  current++;Â 
Â  Â  endQuiz();
Â  }
}

// --- NOUVELLE FONCTION POUR LE RETOUR Ã€ LA RÃ‰VISION ---
function startReview() {
Â  current = 0; // Revenir Ã  la premiÃ¨re question
Â Â 
Â  // RÃ©tablit le contenu du conteneur de navigation aux boutons standard
Â  navContainer.innerHTML = `<button id="prev">PrÃ©cÃ©dent</button><button id="next">Suivant</button>`;
Â Â 
Â  // Les Ã©couteurs d'Ã©vÃ©nements DOIVENT Ãªtre rÃ©attachÃ©s aux nouveaux boutons
Â  document.getElementById("prev").addEventListener("click", handlePrevClick);
Â  document.getElementById("next").addEventListener("click", handleNextClick);
Â Â 
Â  showQuestion();
}

// GÃ¨re l'affichage des rÃ©sultats finaux (avec le Nyan Cat systÃ©matique)
function endQuiz() {
Â  const finalScore = calculateScore();
Â  const totalQuestions = questions.length;
Â Â 
Â  const message = finalScore === totalQuestionsÂ 
Â  Â  ? "FÃ©licitations ! ğŸ‰"Â 
Â  Â  : "Quiz terminÃ© !";
Â  Â Â 
Â  // Utilisez un lien direct vers le Nyan Cat
Â  const nyanCatGifUrl = "https://media.giphy.com/media/RkMZTfC1rhdMk/giphy.gif";Â 
Â  // Ce lien Giphy est gÃ©nÃ©ralement plus stable pour l'affichage direct.

Â  quizDiv.innerHTML = `
Â  Â  <h2>${message}</h2>
Â  Â  <p>Votre score final : ${finalScore}/${totalQuestions}</p>
Â  Â Â 
Â  Â  <img src="${nyanCatGifUrl}" alt="Nyan Cat" style="width: 150px; margin: 20px auto 10px auto; border-radius: 8px;">
Â  Â Â 
Â  Â  <p>${finalScore === totalQuestions ? 'Incroyable, vous avez un score parfait !' : 'Continuez de rÃ©viser pour maÃ®triser le droit des contrats !'}</p>
Â  `;
Â Â 
Â  scoreText.textContent = ''; // Nettoyer le texte de progression

Â  // Remplacer les boutons de navigation par le bouton de rÃ©vision
Â  navContainer.innerHTML = `<button id="review-btn" onclick="startReview()">Revoir mes rÃ©ponses</button>`;
Â  navContainer.style.display = "block";Â 
}

// --- ATTACHEMENT INITIAL DES Ã‰COUTEURS ---
document.getElementById("prev").addEventListener("click", handlePrevClick);
document.getElementById("next").addEventListener("click", handleNextClick);

// DÃ©marrer le quiz au chargement de la page
showQuestion();
